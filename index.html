<?php
session_start();

$products = [
    1 => ['name' => 'Buchet Trandafiri', 'price' => 80, 'img' => 'trandafiri.jpg', 'desc' => 'Buchet de trandafiri roșii, 12 fire.'],
    2 => ['name' => 'Lalele Colorate', 'price' => 60, 'img' => 'lalele.jpg', 'desc' => 'Lalele colorate pentru orice ocazie.'],
    3 => ['name' => 'Orhidee Elegantă', 'price' => 100, 'img' => 'orhidee.jpg', 'desc' => 'Orhidee albă în ghiveci decorativ.'],
];

// dacă s-a trimis formular de adăugare în coș
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['product_id'])) {
    $pid = (int)$_POST['product_id'];
    if (isset($products[$pid])) {
        if (!isset($_SESSION['cart'][$pid])) {
            $_SESSION['cart'][$pid] = 0;
        }
        $_SESSION['cart'][$pid]++;
        header("Location: index.php");
        exit;
    }
}

?>

<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8" />
<title>Florărie Online - Catalog</title>
<style>
body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 20px; }
h1 { text-align: center; }
.catalog { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
.card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
    width: 200px;
    padding: 15px;
    text-align: center;
}
.card img {
    max-width: 100%;
    border-radius: 8px;
}
.btn {
  background-color: #27ae60;
  color: white;
  padding: 10px 18px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  transition: background-color 0.3s ease;
  margin-top: 10px;
  display: inline-block;
  text-decoration: none;
}
.btn:hover {
  background-color: #1e8449;
}
.cart-link {
  position: fixed;
  top: 20px; right: 20px;
  background: #2980b9;
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: bold;
  box-shadow: 0 4px 6px rgba(0,0,0,0.15);
}
</style>
</head>
<body>

<a href="cart.php" class="cart-link">Coș (<?php echo array_sum($_SESSION['cart'] ?? []); ?>)</a>

<h1>Catalog Produse Florărie</h1>
<div class="catalog">
<?php foreach($products as $id => $p): ?>
    <div class="card">
        <a href="product.php?id=<?php echo $id; ?>">
            <img src="<?php echo $p['img']; ?>" alt="<?php echo htmlspecialchars($p['name']); ?>" />
        </a>
        <h3><?php echo htmlspecialchars($p['name']); ?></h3>
        <p><b><?php echo $p['price']; ?> RON</b></p>
        <form method="post" action="index.php">
            <input type="hidden" name="product_id" value="<?php echo $id; ?>" />
            <button type="submit" class="btn">Adaugă în coș</button>
        </form>
    </div>
<?php endforeach; ?>
</div>

</body>
</html>
