<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>Detalii produs</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #fafafa; max-width: 700px; margin: auto; }
    img { max-width: 100%; border-radius: 8px; margin-bottom: 15px; }
    h1 { color: #2c3e50; margin-bottom: 10px; }
    p.description { font-size: 1.1em; margin-bottom: 15px; }
    .price {
      font-weight: bold;
      font-size: 1.4em;
      color: #27ae60;
      margin-bottom: 20px;
    }
    button {
      background: #27ae60;
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 1em;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #219150;
    }
    #cart {
      margin-top: 30px;
      padding: 10px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 0 10px #bbb;
    }
    #cart h2 {
      margin-top: 0;
      font-size: 1.2em;
      color: #34495e;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 1em;
    }
    .cart-item button {
      background: #e74c3c;
      border: none;
      color: white;
      padding: 3px 8px;
      font-size: 0.9em;
      border-radius: 4px;
      cursor: pointer;
    }
    a.back-link {
      display: inline-block;
      margin-bottom: 20px;
      color: #2980b9;
      text-decoration: none;
      font-weight: bold;
    }
    a.back-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<a href="index.html" class="back-link">← Înapoi la catalog</a>

<div id="product-container">
  <h1 id="product-name"></h1>
  <img id="product-img" src="" alt="" />
  <p class="description" id="product-desc"></p>
  <div class="price" id="product-price"></div>
  <button id="add-to-cart">Adaugă în coș</button>
</div>

<div id="cart">
  <h2>Coșul tău</h2>
  <div id="cart-items">Coșul este gol.</div>
</div>

<script>
  // Produsele (poți extinde cu descriere)
  const products = {
    1: {
      name: "Trandafir",
      price: 25,
      img: "https://via.placeholder.com/600x400?text=Trandafir",
      desc: "Un trandafir roșu, simbol al iubirii și pasiunii."
    },
    2: {
      name: "Lalea",
      price: 20,
      img: "https://via.placeholder.com/600x400?text=Lalea",
      desc: "Lalele elegante, perfecte pentru orice ocazie."
    },
    3: {
      name: "Crin",
      price: 30,
      img: "https://via.placeholder.com/600x400?text=Crin",
      desc: "Crini albi, simbol al purității și eleganței."
    },
    4: {
      name: "Buchet Mixt",
      price: 45,
      img: "https://via.placeholder.com/600x400?text=Buchet+Mixt",
      desc: "Un buchet colorat cu flori de sezon."
    }
  };

  // Preluăm id din URL
  const params = new URLSearchParams(window.location.search);
  const id = params.get('id');

  if (!id || !products[id]) {
    document.body.innerHTML = "<h2>Produs inexistent.</h2><a href='index.html'>Înapoi la catalog</a>";
    throw new Error("Produs inexistent");
  }

  const product = products[id];

  // Afișare produs
  document.getElementById('product-name').textContent = product.name;
  document.getElementById('product-img').src = product.img;
  document.getElementById('product-img').alt = product.name;
  document.getElementById('product-desc').textContent = product.desc;
  document.getElementById('product-price').textContent = product.price + " RON";

  const addToCartBtn = document.getElementById('add-to-cart');
  const cartItemsDiv = document.getElementById('cart-items');

  // Citim coșul din localStorage
  let cart = JSON.parse(localStorage.getItem('cart')) || {};

  function renderCart() {
    const keys = Object.keys(cart);
    if (keys.length === 0) {
      cartItemsDiv.textContent = "Coșul este gol.";
      return;
    }
    cartItemsDiv.innerHTML = '';
    keys.forEach(key => {
      const item = cart[key];
      const div = document.createElement('div');
      div.className = "cart-item";
      div.innerHTML = `
        <span>${item.name} x ${item.qty} - ${item.qty * item.price} RON</span>
        <button data-id="${key}">Șterge</button>
      `;
      cartItemsDiv.appendChild(div);

      div.querySelector('button').addEventListener('click', e => {
        const idToRemove = e.target.getAttribute('data-id');
        delete cart[idToRemove];
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
      });
    });
  }

  addToCartBtn.addEventListener('click', () => {
    if (cart[id]) {
      cart[id].qty++;
    } else {
      cart[id] = {
        name: product.name,
        price: product.price,
        qty: 1
      };
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
    alert(`${product.name} a fost adăugat în coș!`);
  });

  renderCart();
</script>

</body>
</html>
